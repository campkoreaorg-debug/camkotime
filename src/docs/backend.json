
{
  "entities": {
    "Session": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Session",
      "type": "object",
      "description": "Represents a distinct event session or round (e.g., 1차, 2차).",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the session." },
        "name": { "type": "string", "description": "The editable name of the session." },
        "ownerId": { "type": "string", "description": "The UID of the user who owns this session data." }
      },
      "required": ["id", "name", "ownerId"]
    },
    "Venue": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Venue",
      "type": "object",
      "description": "Represents a physical venue or location within a session.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "notification": { "type": "string" },
        "isPublic": { "type": "boolean", "description": "If true, this session's data is visible to viewers." }
      },
      "required": ["id", "name"]
    },
    "Staff": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Staff",
      "type": "object",
      "description": "Represents a staff member for a specific session.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "avatar": { "type": "string" }
      },
      "required": ["id", "name"]
    },
    "Schedule": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Schedule",
      "type": "object",
      "description": "A scheduled event for a specific session.",
      "properties": {
        "id": { "type": "string" },
        "day": { "type": "number" },
        "time": { "type": "string" },
        "event": { "type": "string" },
        "location": { "type": "string" },
        "staffIds": { "type": "array", "items": { "type": "string" } },
        "roleName": { "type": "string" }
      },
      "required": ["id", "day", "time", "event"]
    },
    "MapInfo": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MapInfo",
      "type": "object",
      "description": "Map background for a time slot in a session.",
      "properties": {
        "id": { "type": "string" },
        "day": { "type": "number" },
        "time": { "type": "string" },
        "mapImageUrl": { "type": "string" }
      },
      "required": ["id", "day", "time", "mapImageUrl"]
    },
    "MapMarker": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MapMarker",
      "type": "object",
      "description": "A marker on the map for a time slot in a session.",
      "properties": {
        "id": { "type": "string" },
        "day": { "type": "number" },
        "time": { "type": "string" },
        "staffIds": { "type": "array", "items": { "type": "string" } },
        "x": { "type": "number" },
        "y": { "type": "number" }
      },
      "required": ["id", "day", "time", "staffIds", "x", "y"]
    },
    "Role": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Role",
      "type": "object",
      "description": "A role template with predefined tasks for a session.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "tasks": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
               "event": { "type": "string" },
               "location": { "type": "string" }
            }
          }
        }
      },
      "required": ["id", "name"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/sessions/{sessionId}",
        "definition": {
          "entityName": "Session",
          "schema": { "$ref": "#/entities/Session" },
          "description": "Top-level collection. Each document is a separate session.",
          "params": [{ "name": "sessionId" }]
        }
      },
      {
        "path": "/sessions/{sessionId}/venue/{venueId}",
        "definition": {
          "entityName": "Venue",
          "schema": { "$ref": "#/entities/Venue" },
          "description": "Venue information for a specific session. Only one venue per session.",
          "params": [{ "name": "sessionId" }, { "name": "venueId" }]
        }
      },
      {
        "path": "/sessions/{sessionId}/staff/{staffId}",
        "definition": {
          "entityName": "Staff",
          "schema": { "$ref": "#/entities/Staff" },
          "description": "Staff members for a specific session.",
          "params": [{ "name": "sessionId" }, { "name": "staffId" }]
        }
      },
      {
        "path": "/sessions/{sessionId}/schedules/{scheduleId}",
        "definition": {
          "entityName": "Schedule",
          "schema": { "$ref": "#/entities/Schedule" },
          "description": "Schedules for a specific session.",
          "params": [{ "name": "sessionId" }, { "name": "scheduleId" }]
        }
      },
      {
        "path": "/sessions/{sessionId}/maps/{mapId}",
        "definition": {
          "entityName": "MapInfo",
          "schema": { "$ref": "#/entities/MapInfo" },
          "description": "Map images for a specific session.",
          "params": [{ "name": "sessionId" }, { "name": "mapId" }]
        }
      },
      {
        "path": "/sessions/{sessionId}/markers/{markerId}",
        "definition": {
          "entityName": "MapMarker",
          "schema": { "$ref": "#/entities/MapMarker" },
          "description": "Map markers for a specific session.",
          "params": [{ "name": "sessionId" }, { "name": "markerId" }]
        }
      },
       {
        "path": "/sessions/{sessionId}/roles/{roleId}",
        "definition": {
          "entityName": "Role",
          "schema": { "$ref": "#/entities/Role" },
          "description": "Role templates for a specific session.",
          "params": [{ "name": "sessionId" }, { "name": "roleId" }]
        }
      }
    ],
    "reasoning": "The Firestore structure is updated to be session-centric. A top-level 'sessions' collection is introduced. All other data (venue, staff, schedules, etc.) are now stored in subcollections under a specific session document. This ensures complete data isolation between different sessions, fulfilling the user's request for separate management per '차수'."
  }
}
